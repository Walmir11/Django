{% extends "base.html" %}

{% block title %}Painel do Profissional{% endblock %}

{% block content %}
  <h2>Olá, {{ user.first_name }}!</h2>
  <p>Bem-vindo(a) ao seu painel de controle.</p>

  <hr>

  <h3>Seus Serviços</h3>
  <a href="{% url 'criar_servico' %}" style="display: inline-block; margin-bottom: 15px; padding: 10px 15px; background-color: #28a745; color: white; text-decoration: none; border-radius: 5px;">+ Cadastrar Novo Serviço</a>
  {% if servicos %}
    <ul>
      {% for servico in servicos %}
        <li>
          {{ servico.nome }} - R$ {{ servico.valor|floatformat:2 }} - Duração(Horas): {{ servico.get_formatted_duration }}
          <a href="{% url 'editar_servico' servico.pk %}" style="margin-left: 10px; font-size: 0.9em;">[Editar]</a>
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <p>Você ainda não cadastrou nenhum serviço.</p>
  {% endif %}

  <hr>

  <h3>Seus Próximos Atendimentos</h3>
  {% if agendamentos_futuros %}
    <ul>
      {% for agendamento in agendamentos_futuros %}
        <li>
          <strong>Serviço:</strong> {{ agendamento.servico.nome }} (R$ {{ agendamento.servico.valor|floatformat:2 }})
          <br>
          <strong>Cliente:</strong> {{ agendamento.cliente.get_full_name }}
          <br>
          <strong>Data:</strong> {{ agendamento.data_hora_inicio|date:"d/m/Y" }} às {{ agendamento.data_hora_inicio|time:"H:i" }}
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <p>Você não possui atendimentos futuros agendados.</p>
  {% endif %}

  <hr>

  <h3>Histórico de Atendimentos</h3>
  {% if agendamentos_passados %}
    <ul>
      {% for agendamento in agendamentos_passados %}
        <li>
          <strong>Serviço:</strong> {{ agendamento.servico.nome }} (R$ {{ agendamento.servico.valor|floatformat:2 }})
          <br>
          <strong>Cliente:</strong> {{ agendamento.cliente.get_full_name }}
          <br>
          <strong>Data:</strong> {{ agendamento.data_hora_inicio|date:"d/m/Y" }} às {{ agendamento.data_hora_inicio|time:"H:i" }}
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <p>Você ainda não possui um histórico de atendimentos.</p>
  {% endif %}
{% endblock %}